<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<style>
			.node {
				cursor: pointer;
			}

			.node circle, .node rect {
				stroke-width: 1.5px;
				stroke:       #4169e1;
				fill:         #ffffff;
			}

			.node text {
				font: 11px sans-serif;
			}

			.link {
				fill:         none;
				stroke:       #cccccc;
				stroke-width: 1.5px;
			}

			.node .root {
				stroke: #4169e1;
				fill:   #35a6ff;
				r:      7;
			}

			.node .class {
				stroke: #4169e1;
				fill:   #7cbbff;
			}

			.node .function {
				stroke: #a0522d;
				fill:   #deb887;
			}
		</style>
	</head>
	<body>
		<!-- copied from http://bl.ocks.org/d3noob/8329404 -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>

		<script>
            /**
             * jsdoc2diagram
             *
             * copied from http://bl.ocks.org/d3noob/8329404
             */

            /*global d3*/

            'use strict'

            var treeData = {}
            var margin   = {
                top:    20,
                right:  120,
                bottom: 20,
                left:   120
            }
            var width
            var height
            var duration = 0
            var tree     = d3.layout.tree()

            var diagonal = d3.svg.diagonal()
                             .projection( function ( d ) {
                                 return [ d.y, d.x ]
                             } )

            var svg = d3.select( 'body' ).append( 'svg' )
                        .attr( 'id', 'diagram' )
                        .append( 'g' )
                        .attr( 'transform', 'translate(' + margin.left + ',' + margin.top + ')' )

            function update ( source ) {
                // Compute the new tree layout.
                var i     = 0
                var nodes = tree.nodes( treeData ).reverse()
                var links = tree.links( nodes )

                // Normalize for fixed-depth.
                nodes.forEach( function ( d ) {
                    d.y = d.depth * 180
                } )

                // Update the nodes…
                var node = svg.selectAll( 'g.node' )
                              .data( nodes, function ( d ) {
                                  return d.id || ( d.id = ++i )
                              } )

                // Enter any new nodes at the parent's previous position.
                var nodeEnter = node.enter().append( 'g' )
                                    .attr( 'class', 'node' )
                                    .attr( 'transform', function ( d ) {
                                        return 'translate(' + source.y0 + ',' + source.x0 + ')'
                                    } )
                                    .on( 'click', click )

                nodeEnter.append( 'text' )
                         .text( function ( d ) {
                             return d.shortName + ( d.type === 'function' ? '()' : '' )
                         } )
                         .attr( 'x', function ( d ) {
                             return d.children || d._children ? -10 : 10
                         } )
                         .attr( 'dy', '.35em' )
                         .attr( 'text-anchor', function ( d ) {
                             return d.children || d._children ? 'end' : 'start'
                         } )
                         .style( 'fill-opacity', 1e-6 )

                // Transition nodes to their new position.
                var nodeUpdate = node.transition()
                                     .duration( duration )
                                     .attr( 'transform', function ( d ) {
                                         return 'translate(' + d.y + ',' + d.x + ')'
                                     } )

                nodeUpdate.select( 'circle' )
                          .attr( 'r', 4.5 )

                var allTextNodes = nodeEnter.select( 'text' )
                allTextNodes.each( function ( d, index ) {
                    var textNodeParent = d3.select( allTextNodes[ 0 ][ index ].parentNode )
                    if ( d.type.match( /(root|class|function)/ ) ) {
                        textNodeParent.append( 'circle' )
                                      .attr( 'r', 5 )
                                      .attr( 'class', d.type )
                    } else {
                        textNodeParent.append( 'rect' )
                                      .attr( 'width', 10 )
                                      .attr( 'height', 10 )
                                      .attr( 'x', -5 )
                                      .attr( 'y', -5 )
                                      .attr( 'class', d.type )
                    }
                } )

                nodeUpdate.select( 'text' )
                          .style( 'fill-opacity', 1 )

                // Transition exiting nodes to the parent's new position.
                var nodeExit = node.exit().transition()
                                   .duration( duration )
                                   .attr( 'transform', function ( d ) {
                                       return 'translate(' + source.y + ',' + source.x + ')'
                                   } )
                                   .remove()

                nodeExit.select( 'circle' )
                        .attr( 'r', 1e-6 )

                nodeExit.select( 'text' )
                        .style( 'fill-opacity', 1e-6 )

                // Update the links…
                var link = svg.selectAll( 'path.link' )
                              .data( links, function ( d ) {
                                  return d.target.id
                              } )

                // Enter any new links at the parent's previous position.
                link.enter().insert( 'path', 'g' )
                    .attr( 'class', 'link' )
                    .attr( 'd', function ( d ) {
                        var o = {
                            x: source.x0,
                            y: source.y0
                        }
                        return diagonal( {
                            source: o,
                            target: o
                        } )
                    } )

                // Transition links to their new position.
                link.transition()
                    .duration( duration )
                    .attr( 'd', diagonal )

                // Transition exiting nodes to the parent's new position.
                link.exit().transition()
                    .duration( duration )
                    .attr( 'd', function ( d ) {
                        var o = {
                            x: source.x,
                            y: source.y
                        }
                        return diagonal( {
                            source: o,
                            target: o
                        } )
                    } )
                    .remove()

                // Stash the old positions for transition.
                nodes.forEach( function ( d ) {
                    d.x0 = d.x
                    d.y0 = d.y
                } )

                // adjust the width/height
                setTimeout( function () {
                    var d                    = d3.select( '#diagram' )
                    var w                    = svg[ 0 ][ 0 ].getBBox().width
                    var h                    = svg[ 0 ][ 0 ].getBBox().height
                    d[ 0 ][ 0 ].style.width  = ( w + 100 )
                    d[ 0 ][ 0 ].style.height = ( h + 100 )
                }, 100 )
            }

            function init ( data ) {

                var nodes = tree.nodes( data ).reverse()
                var map   = {}
                svg.selectAll( 'g.node' )
                   .data( nodes, function ( d ) {
                       var maxRows    = d.parent ? d.parent.children.length : 1
                       var preMax     = map[ d.depth ] || 1
                       map[ d.depth ] = Math.max( preMax, maxRows )
                       return d.shortName
                   } )

                var maxRow  = 1
                var maxCols = 1
                // get max rows
                for ( var key in map ) {
                    maxRow = Math.max( maxRow, map[ key ] )
                    maxCols++
                }

                width  = ( maxCols * 200 ) - margin.right - margin.left
                height = ( maxRow * 30 ) - margin.top - margin.bottom
                tree   = d3.layout.tree().size( [ height, width ] )

                d3.select( '#diagram' )
                  .attr( 'width', width + margin.right + margin.left )
                  .attr( 'height', height + margin.top + margin.bottom )

                data.x0  = height / 2
                data.y0  = 0
                treeData = data
                update( data )
            }

            // Toggle children on click.
            function click ( d ) {
                if ( d.children ) {
                    d._children = d.children
                    d.children  = null
                } else {
                    d.children  = d._children
                    d._children = null
                }
                update( d )
            }


            init( {
                'shortName': 'root',
                'type':      'root',
                'children':  [ {
                    'name':      'module.Controllers.TAbstractDataController',
                    'shortName': 'TAbstractDataController',
                    'parent':    '',
                    'type':      'module',
                    'children':  [ {
                        'name':      'module.Controllers.TAbstractDataController.TAbstractDataController',
                        'shortName': 'TAbstractDataController',
                        'parent':    'module.Controllers.TAbstractDataController',
                        'type':      'class',
                        'children':  [ {
                            'name':      'module.Controllers.TAbstractDataController.TAbstractDataController.driver',
                            'shortName': 'driver',
                            'parent':    'module.Controllers.TAbstractDataController.TAbstractDataController',
                            'type':      'member'
                        } ]
                    } ]
                },
                               {
                                   'name':      'module.Databases.TAbstractResponder',
                                   'shortName': 'TAbstractResponder',
                                   'parent':    '',
                                   'type':      'module',
                                   'children':  [ {
                                       'name':      'module.Databases.TAbstractResponder.TAbstractResponder',
                                       'shortName': 'TAbstractResponder',
                                       'parent':    'module.Databases.TAbstractResponder',
                                       'type':      'class',
                                       'children':  [ {
                                           'name':      'module.Databases.TAbstractResponder.TAbstractResponder._formatErrors',
                                           'shortName': '_formatErrors',
                                           'parent':    'module.Databases.TAbstractResponder.TAbstractResponder',
                                           'type':      'function'
                                       },
                                                      {
                                                          'name':      'module.Databases.TAbstractResponder.TAbstractResponder._formatError',
                                                          'shortName': '_formatError',
                                                          'parent':    'module.Databases.TAbstractResponder.TAbstractResponder',
                                                          'type':      'function'
                                                      },
                                                      {
                                                          'name':      'module.Databases.TAbstractResponder.TAbstractResponder.returnNotFound',
                                                          'shortName': 'returnNotFound',
                                                          'parent':    'module.Databases.TAbstractResponder.TAbstractResponder',
                                                          'type':      'function'
                                                      },
                                                      {
                                                          'name':      'module.Databases.TAbstractResponder.TAbstractResponder.returnError',
                                                          'shortName': 'returnError',
                                                          'parent':    'module.Databases.TAbstractResponder.TAbstractResponder',
                                                          'type':      'function'
                                                      },
                                                      {
                                                          'name':      'module.Databases.TAbstractResponder.TAbstractResponder.returnData',
                                                          'shortName': 'returnData',
                                                          'parent':    'module.Databases.TAbstractResponder.TAbstractResponder',
                                                          'type':      'function'
                                                      },
                                                      {
                                                          'name':      'module.Databases.TAbstractResponder.TAbstractResponder.returnErrorAndData',
                                                          'shortName': 'returnErrorAndData',
                                                          'parent':    'module.Databases.TAbstractResponder.TAbstractResponder',
                                                          'type':      'function'
                                                      } ]
                                   } ]
                               },
                               {
                                   'name':      '<anonymous>.dispatchResult',
                                   'shortName': 'dispatchResult',
                                   'parent':    '<anonymous>',
                                   'type':      'function'
                               },
                               {
                                   'name':      'external."Itee.Validators"',
                                   'shortName': 'Validators"',
                                   'parent':    '',
                                   'type':      'external'
                               },
                               {
                                   'name':      'external.Others',
                                   'shortName': 'Others',
                                   'parent':    '',
                                   'type':      'external',
                                   'children':  [ {
                                       'name':      'external.Others.DatabaseDriver',
                                       'shortName': 'DatabaseDriver',
                                       'parent':    'external.Others',
                                       'type':      'typedef'
                                   } ]
                               },
                               {
                                   'name':      'module.Messages.AbstractError',
                                   'shortName': 'AbstractError',
                                   'parent':    '',
                                   'type':      'module',
                                   'children':  [ {
                                       'name':      'module.Messages.AbstractError.AbstractError',
                                       'shortName': 'AbstractError',
                                       'parent':    'module.Messages.AbstractError',
                                       'type':      'class',
                                       'children':  [ {
                                           'name':      'module.Messages.AbstractError.AbstractError.isAbstractError',
                                           'shortName': 'isAbstractError',
                                           'parent':    'module.Messages.AbstractError.AbstractError',
                                           'type':      'constant'
                                       },
                                                      {
                                                          'name':      'module.Messages.AbstractError.AbstractError.uuid',
                                                          'shortName': 'uuid',
                                                          'parent':    'module.Messages.AbstractError.AbstractError',
                                                          'type':      'member'
                                                      },
                                                      {
                                                          'name':      'module.Messages.AbstractError.AbstractError.name',
                                                          'shortName': 'name',
                                                          'parent':    'module.Messages.AbstractError.AbstractError',
                                                          'type':      'member'
                                                      },
                                                      {
                                                          'name':      'module.Messages.AbstractError.AbstractError.message',
                                                          'shortName': 'message',
                                                          'parent':    'module.Messages.AbstractError.AbstractError',
                                                          'type':      'member'
                                                      },
                                                      {
                                                          'name':      'module.Messages.AbstractError.AbstractError.stack',
                                                          'shortName': 'stack',
                                                          'parent':    'module.Messages.AbstractError.AbstractError',
                                                          'type':      'member'
                                                      } ]
                                   } ]
                               } ]
            } )
		</script>

	</body>
</html>
